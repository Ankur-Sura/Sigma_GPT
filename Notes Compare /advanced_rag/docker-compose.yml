services:
  valkey:
    image: valkey/valkey
    ports:
      - 6379:6379
      
  vector-db:
    image: qdrant/qdrant
    ports:
      - 6333:6333

# What does we require this ? Because we want to create a database where we can store our queue progress

# More explaination of Code:

# services:
#   valkey:
#     image: valkey/valkey
#     ports:
#       - 6379:6379

# This is a Docker Compose service.
# Each service = one mini-server (container) running inside Docker.

# Here, the service name = valkey.

# âœ… What is Valkey?

# Valkey = Open-source Redis replacement.

# Since Redis became closed-source in 2024, the community created Valkey as an open alternative.

# ğŸ‘‰ Valkey works exactly like Redis.
# ğŸ‘‰ Same commands, same ports, same tools.

# So in your project:
# 	â€¢	You are using RQ (Redis Queue)
# 	â€¢	RQ requires a Redis/Valkey server
# 	â€¢	Therefore, you MUST run a Redis/Valkey container

# âœ… Why do we need this block?

# Because RQ Queue uses Redis (or Valkey) as its database to store:
# 	â€¢	queued jobs
# 	â€¢	job results
# 	â€¢	job status (queued, started, finished)

# If this service is missing:

# docker compose up

# will fail because:

# âŒ No Redis = RQ Queue cannot connect

# âŒ RQ Queue cannot start = FastAPI or worker will crash

# âŒ Compose fails because a required service is missing

# Thatâ€™s why Docker Compose was refusing to run.


# âœ… What exactly does this service do?

# âœ” 1. image: valkey/valkey

# Tells Docker:

# â€œDownload the official Valkey image and run it.â€

# This container contains the Valkey server binary.


# âœ” 2. ports:

#   - 6379:6379

# Format:

# HOST_PORT : CONTAINER_PORT

# Meaning:
  # 	â€¢	Inside Docker container: Valkey runs on port 6379
  # 	â€¢	On your laptop: expose it also on 6379

# So you can connect using:

  # Redis(host="localhost", port=6379)

# â­ Why your project MUST have Redis/Valkey?

# Because your code already contains:

# from redis import Redis
# from rq import Queue

# queue = Queue(connection=Redis())

# RQ cannot run without a Redis/Valkey connection.

# So Docker Compose must include a Redis/Valkey service.


# ğŸ§  Simple Analogy

# Think of your project as:
  # 	â€¢	FastAPI = the receptionist
  # 	â€¢	RQ Worker = the employee who does background tasks
  # 	â€¢	Redis/Valkey = the office storage room where â€œtasksâ€ are stored

# If storage room is missing â†’ whole office is dysfunctional.

# ğŸ¯ FINAL SUMMARY
#   âœ” valkey service runs Redis-like database

#   âœ” Required by RQ Queue

#   âœ” Exposes port 6379

#   âœ” Without it, your FastAPI + RQ system cannot work

#   âœ” Without it â†’ docker compose up fails

